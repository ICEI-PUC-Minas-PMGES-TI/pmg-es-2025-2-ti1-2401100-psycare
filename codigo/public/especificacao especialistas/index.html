<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PSYCARE - Especialistas</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header>
    <img src="imgs/logo.png" alt="Logo PSYCARE" id="logo" />
    <nav>
      <a href="#">Início</a>
      <a href="#" class="active">Especialistas</a>
      <a href="#">Conteúdo de Apoio</a>
    </nav>
    <button>Login</button>
  </header>

  <main>
    <div class="top-section">
      <h2>Especialista em Minas Gerais</h2>
      <div class="filter-state">
        <label for="stateSelect">Escolha o estado:</label>
        <select id="stateSelect" aria-label="Selecione o estado para filtrar especialistas">
          <!-- Opções serão preenchidas via JS -->
        </select>
      </div>
    </div>

    <div class="cards-carousel" aria-live="polite" aria-atomic="true" aria-relevant="all">
      <div class="cards-wrapper" id="cardsWrapper">
        <!-- Cards gerados por JS -->
      </div>
    </div>

    <div class="carousel-controls">
      <button aria-label="Anterior" id="prevBtn" class="carousel-button" disabled>&lt;</button>
      <button aria-label="Próximo" id="nextBtn" class="carousel-button">&gt;</button>
    </div>
  </main>

  <script>
    const especialistas = [
      {
        id: 1,
        nome: "Dra. Mariana Castro",
        cargo: "Psicóloga",
        estado: "Minas Gerais",
        descricao: "Psicóloga clínica especializada em TCC para ansiedade e depressão.",
        imagem: "imgs/drmariana.jpg",
        especialidades: ["Psicologia", "TCC", "Ansiedade", "Depressão"],
      },
      {
        id: 2,
        nome: "Dr. Ricardo Nunes",
        cargo: "Psiquiatra",
        estado: "Minas Gerais",
        descricao: "Psiquiatra com foco em transtornos do humor e saúde mental.",
        imagem: "imgs/drricardo.jpg",
        especialidades: ["Psiquiatria", "Transtornos do Humor", "Saúde Mental"],
      },
      {
        id: 3,
        nome: "Dra. Juliana Prado",
        cargo: "Psicóloga infantil",
        estado: "Minas Gerais",
        descricao: "Psicóloga infantil, atua com crianças e lidar com emoções.",
        imagem: "imgs/drjuliana.jpg",
        especialidades: ["Psicologia", "Infantil", "Emoções"],
      },
      {
        id: 4,
        nome: "Dr. Felipe Andrade",
        cargo: "Terapeuta",
        estado: "Minas Gerais",
        descricao: "Terapeuta familiar, atua em mediação de conflitos e relações saudáveis.",
        imagem: "imgs/drfelipe.jpg",
        especialidades: ["Terapia Familiar", "Mediação", "Relações Saudáveis"],
      },
      {
        id: 5,
        nome: "Dra. Camila Torres",
        cargo: "Psicóloga clínica",
        estado: "Minas Gerais",
        descricao: "Psicóloga clínica, atendimento de jovens adultos em crise de identidade.",
        imagem: "imgs/drcamila.jpg",
        especialidades: ["Psicologia", "Jovens Adultos", "Crise de Identidade"],
      },
      {
        id: 6,
        nome: "Dr. Bruno Martins",
        cargo: "Consultor",
        estado: "Minas Gerais",
        descricao: "Consultor para adultas e MT, orientação pessoal e profissional.",
        imagem: "imgs/drbruno.jpg",
        especialidades: ["Consultoria", "Orientação Pessoal", "Profissional"],
      }
    ];

    const itemsPerPage = 9;
    const stateSelect = document.getElementById("stateSelect");
    const cardsWrapper = document.getElementById("cardsWrapper");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const title = document.querySelector(".top-section h2");

    let currentPage = 0;
    let filteredEspecialistas = [];
    let selectedState = "Minas Gerais";

    // Preenche o select com estados distintos
    function populateStates() {
      const estadosUnicos = [...new Set(especialistas.map(e => e.estado))].sort();
      if (estadosUnicos.includes("Minas Gerais")) {
        estadosUnicos.splice(estadosUnicos.indexOf("Minas Gerais"), 1);
        estadosUnicos.unshift("Minas Gerais");
      }
      estadosUnicos.forEach(estado => {
        const option = document.createElement("option");
        option.value = estado;
        option.textContent = estado;
        stateSelect.appendChild(option);
      });
      stateSelect.value = selectedState;
    }

    function createCard(especialista) {
      const card = document.createElement("div");
      card.className = "card-psicologo";

      const img = document.createElement("img");
      img.src = especialista.imagem;
      img.alt = `Foto de ${especialista.nome}`;
      card.appendChild(img);

      const tagCargo = document.createElement("div");
      tagCargo.className = "tags";
      tagCargo.textContent = especialista.cargo;
      card.appendChild(tagCargo);

      const tagEstado = document.createElement("div");
      tagEstado.className = "tags";
      tagEstado.textContent = especialista.estado;
      card.appendChild(tagEstado);

      const nome = document.createElement("h3");
      nome.textContent = especialista.nome;
      card.appendChild(nome);

      const desc = document.createElement("p");
      desc.className = "description";
      desc.textContent = especialista.descricao;
      card.appendChild(desc);

      const btn = document.createElement("button");
      btn.className = "btn-agendarconsulta";
      btn.textContent = "Agendar Consulta";
      btn.setAttribute("aria-label", `Agendar consulta com ${especialista.nome}`);
      card.appendChild(btn);

      return card;
    }

    function renderPage(page = 0) {
      cardsWrapper.innerHTML = "";
      const start = page * itemsPerPage;
      const end = start + itemsPerPage;
      const slice = filteredEspecialistas.slice(start, end);
      if (slice.length === 0 && page > 0) {
        currentPage--;
        renderPage(currentPage);
        return;
      }
      slice.forEach(e => {
        cardsWrapper.appendChild(createCard(e));
      });

      prevBtn.disabled = page === 0;
      nextBtn.disabled = end >= filteredEspecialistas.length;

      title.textContent = `Especialistas em ${selectedState}`;
    }

    function filterByState(estado) {
      selectedState = estado;
      filteredEspecialistas = especialistas.filter(e => e.estado === estado);
      currentPage = 0;
      renderPage(currentPage);
    }

    prevBtn.addEventListener("click", () => {
      if (currentPage > 0) {
        currentPage--;
        renderPage(currentPage);
      }
    });

    nextBtn.addEventListener("click", () => {
      if ((currentPage + 1) * itemsPerPage < filteredEspecialistas.length) {
        currentPage++;
        renderPage(currentPage);
      }
    });

    stateSelect.addEventListener("change", (e) => {
      filterByState(e.target.value);
    });

    window.onload = () => {
      populateStates();
      filterByState(selectedState);
    };
  </script>
</body>

</html>